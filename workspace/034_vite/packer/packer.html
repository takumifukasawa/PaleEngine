<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>html to png packer</title>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
    let inputStr = "";
    for (let i = 0; i < 10000; i++) {
        inputStr += Math.floor(Math.random() * 10).toString();
    }

    // const canvas = document.createElement("canvas");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const pixelNum = inputStr.length;
    const width = Math.ceil(Math.sqrt(pixelNum));
    const height = Math.ceil(Math.sqrt(pixelNum));
    canvas.width = width;
    canvas.height = height;
    const imageData = ctx.createImageData(width, height);
    // for (let i = 0; i < pixelNum; i++) {
    //     // imageData[i * 4] = inputStr.charAt(i);
    //     imageData[i * 4] = Number.parseInt(inputStr.charAt(i));
    //     // console.log(i, inputStr.charAt(i))
    //     imageData[i * 4 + 0] = 255;
    //     imageData[i * 4 + 1] = 255;
    //     imageData[i * 4 + 2] = 0;
    //     imageData[i * 4 + 3] = 255;
    // }
    for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
            const stride = 4;
            const i = width * y + x;
            const pi = i * 4;
            const str = inputStr.charAt(i);
            const strNum  =Number.parseInt(str);
            imageData.data[pi + 0] = strNum * 25;
            imageData.data[pi + 1] = 0;
            imageData.data[pi + 2] = 0;
            imageData.data[pi + 3] = 255;
        }
    }

    ctx.putImageData(imageData, 0, 0);

    //const debugCanvas = document.getElementById("debug-canvas");
    //const debugCtx = debugCanvas.getContext("2d");
    //debugCanvas.width = width;
    //debugCanvas.height = height;
    //debugCtx.putImageData(imageData, 0, 0);
    //// debugCtx.fillStyle = "blue";
    //// debugCtx.fillRect(0, 0, 100, 100);
</script>
</body>
</html>